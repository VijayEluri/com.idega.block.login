<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<div
	xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core">
	<script 
		type="text/javascript">
	jQuery(document).ready(function(){
		PasswordTokenCreatorHelper.FIELD_IS_REQUIRED = "#{localizedStrings['com.idega.block.login']['reset.field_is_required']}";
	});
	</script>
	<!-- Reminder form -->
	<h:form
		rendered="#{not passwordTokenBean.processStarted}"
		styleClass="password-form"
		id="passwordReminder">
		<h1>#{localizedStrings['com.idega.block.login']['reset.password_reset']}</h1>
		<h:panelGrid
			columns="2"
			styleClass="passwordTable">
			<h:panelGroup>
				<h:outputLabel
					for="email"
					value="#{localizedStrings['com.idega.block.login']['reset.identificator']}"/>
			</h:panelGroup>
			<h:panelGroup>
				<h:inputText
					id="email"
					value="#{passwordTokenBean.identifier}"/>
			</h:panelGroup>
			<h:panelGroup>
				<h:outputLabel
					for="capchaText"
					value="#{localizedStrings['com.idega.block.login']['reset.enter_text_above']}"/>
			</h:panelGroup>
			<h:panelGroup>
				<h:inputText
					id="capchaText"
					value="#{passwordTokenBean.capcha}"/>
				<h:outputText
					rendered="#{passwordTokenBean.capchaFailed}"
					for="capchaText"
					value="#{localizedStrings['com.idega.block.login']['reset.capcha_failed']}"
					styleClass="errorMessage"/>
			</h:panelGroup>
			<h:panelGroup/>
			<h:panelGroup>
				<h:graphicImage 
					value="#{web2bean.JCaptchaImageURL}"
					alt="capcha"/>
			</h:panelGroup>
		</h:panelGrid>
		<h:commandButton
			id="saveButton"
			value="#{localizedStrings['com.idega.block.login']['reset.reset']}"
			action="#{passwordTokenBean.submit}"/>
	</h:form>
	<h:panelGroup
		rendered="#{passwordTokenBean.processStarted}">
		<h1>#{localizedStrings['com.idega.block.login']['reset.password_reset']}</h1>
		<p>#{localizedStrings['com.idega.block.login']['mail.email_sent']}</p>
		<p>#{localizedStrings['com.idega.block.login']['mail.email_sent_to']}
			<h:outputText value="#{passwordTokenBean.identifier}"/>
		</p>
		<p>#{localizedStrings['com.idega.block.login']['mail.email_sent_info']}</p>
	</h:panelGroup>
</div>