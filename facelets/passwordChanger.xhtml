<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<div
	xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:t="http://myfaces.apache.org/tomahawk">
	<link 
		rel="stylesheet"
		type="text/css"
		href="#{iwResourceResolver['com.idega.block.login']['style/passwordTokenCreator.css']}"/>
	<script 
		type="text/javascript" 
		src="//code.jquery.com/jquery-1.9.0.min.js"/>
	<script 
		type="text/javascript"
		src="http://ajax.aspnetcdn.com/ajax/jquery.validate/1.11.1/jquery.validate.min.js"/>
	<script 
		type="text/javascript"
		src="#{iwResourceResolver['com.idega.block.login']['javascript/passwordChangerHelper.js']}"/>
	<script 
		type="text/javascript">
		PasswordChangerHelper.FIELD_IS_REQUIRED = "#{localizedStrings['com.idega.block.login']['reset.field_is_required']}";
		PasswordChangerHelper.PASSWORDS_DO_NOT_MATCH = "#{localizedStrings['com.idega.block.login']['password_validation_error']}"
	</script>
	<h:panelGroup
		rendered="#{(not passwordChangerBean.changed) and (not passwordChangerBean.tokenValid)}">
		<h1>#{localizedStrings['com.idega.block.login']['reset.change_password']}</h1>
		<p>#{localizedStrings['com.idega.block.login']['reset.your_link_not_valid']}<a href=".">#{localizedStrings['com.idega.block.login']['reset.here']}</a></p>
	</h:panelGroup>
	<h:panelGroup
		rendered="#{(not passwordChangerBean.changed) and (passwordChangerBean.tokenValid)}">
		<h1>#{localizedStrings['com.idega.block.login']['reset.change_password']}</h1>
		<h:form
			id="passwordReset">
			<h:panelGrid
				columns="2">
				<h:panelGroup>
					<h:outputLabel
						for="newPassword"
						value="#{localizedStrings['com.idega.block.login']['reset.new_password']}"/>
				</h:panelGroup>
				<h:panelGroup>
					<h:inputSecret
						id="newPassword"
						value="#{passwordChangerBean.newPassword}"/>
				</h:panelGroup>
				<h:panelGroup>
					<h:outputLabel
						for="retypedPassword"
						value="#{localizedStrings['com.idega.block.login']['reset.verify_password']}"/>
				</h:panelGroup>
				<h:panelGroup>
					<h:inputSecret
						id="retypedPassword"
						value="#{passwordChangerBean.retypedPassword}"/>
				</h:panelGroup>
				<h:panelGroup>
					<t:inputHidden
						id="prm_password_changed"
						forceId="true"
						value="#{passwordChangerBean.changed}"/>
				</h:panelGroup>
				<h:panelGroup>
					<t:inputHidden
						id="prm_token"
						forceId="true"
						value="#{passwordChangerBean.token}"/>
				</h:panelGroup>
			</h:panelGrid>
			<h:commandButton
				id="resetButton"
				value="#{localizedStrings['com.idega.block.login']['reset.change']}"
				action="#{passwordChangerBean.submit}"/>
		</h:form>
	</h:panelGroup>
	<h:panelGroup
		rendered="#{passwordChangerBean.changed}">
		<h1>#{localizedStrings['com.idega.block.login']['reset.change_password']}</h1>
		<p>#{localizedStrings['com.idega.block.login']['updated']}</p>
	</h:panelGroup>
</div>